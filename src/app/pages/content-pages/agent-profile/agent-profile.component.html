<!-- Agent Single Grid View -->
<section class="our-agent-single bgc-f7 pb30-991 agent-list">
    <div class="container">
        <div class="row">
            <div class="col-md-12 col-lg-10 offset-lg-1">
                <div class="breadcrumb_content style2 mt30-767 mb30-767">
                    <h2 class="breadcrumb_title text-center">Profile</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 col-lg-10 offset-lg-1">
                <div class="row">
                    <div class="col-lg-12">
                        <ng-container *ngIf="!user">
                            <div class="card-skeleton">
                                <div class="animated-background">
                                    <div class="card-skeleton-img"></div>
                                    <div class="skel-mask-container">
                                        <div class="skel-mask skel-mask-1"></div>
                                        <div class="skel-mask skel-mask-2"></div>
                                        <div class="skel-mask skel-mask-3"></div>
                                        <div class="skel-mask skel-mask-4"></div>
                                        <div class="skel-mask skel-mask-5"></div>
                                        <div class="skel-mask skel-mask-6"></div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                        <ng-container *ngIf="user">
                            <div class="feat_property list style2 agent">
                                <div class="thumb">
                                    <img class="img-whp a-img"
                                        [src]="user &&  user.profile_media ? user.profile_media.base_path+'/'+user.profile_media.system_name : '../assets/images/avatar.jpg'"
                                        alt="../assets/images/avatar.jpg">
                                </div>
                                <div class="details">
                                    <div class="tc_content">
                                        <h4 class="float-left">{{user?.first_name}} {{user?.last_name}} <img
                                                *ngIf="user?.agent_request == 3" src="assets/images/verified.png"
                                                alt="Verified">
                                            <small *ngIf="user?.agent_request == 3">Verified</small></h4>
                                        <p class="float-right pt-1"> <i class="fa fa-star"> </i>
                                            {{user.avg_rating ? user.avg_rating : 0.0}}</p>
                                        <ul class="prop_details mb0">
                                            <button type="button" class="btn btn-secondary mr-1" (click)="openChat()"><i
                                                    class="fa fa-envelope"></i> Message </button>
                                            <button type="button" class="btn btn-primary" [popover]="user?.email"
                                                placement="bottom" popoverTitle="Agent Email" triggers="click"><i
                                                    class="fa fa-phone"></i>
                                                Contact Us</button>
                                            <li>Available Properties: {{user?.property_count?.available}}</li>
                                            <li>For Sale: {{user?.property_count?.sale}}</li>
                                            <li>For Rent: {{user?.property_count?.rent}}</li>
                                        </ul>
                                    </div>
                                    <div class="fp_footer">
                                        <div class="fp_pdatetext-thm"><strong>Info</strong></div>
                                        <p>{{user?.about_me}}</p>
                                    </div>
                                </div>
                            </div>
                        </ng-container>

                        <div class="shop_single_tab_content style2 mt30">
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="listing-tab" data-toggle="tab" href="#listing"
                                        role="tab" aria-controls="listing" aria-selected="false">Listing</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="review-tab" (click)="getReviews()" data-toggle="tab"
                                        href="#review" role="tab" aria-controls="review"
                                        aria-selected="false">Reviews</a>
                                </li>
                            </ul>
                            <div class="tab-content" id="myTabContent2">
                                <div class="tab-pane fade show active row pl15 pl0-1199 pr15 pr0-1199" id="listing"
                                    role="tabpanel" aria-labelledby="listing-tab">
                                    <ng-container *ngIf="showLoading">
                                        <div class="card-skeleton props">
                                            <div class="animated-background">
                                                <div class="card-skeleton-img"></div>
                                                <div class="skel-mask-container">
                                                    <div class="skel-mask skel-mask-1"></div>
                                                    <div class="skel-mask skel-mask-2"></div>
                                                    <div class="skel-mask skel-mask-3"></div>
                                                    <div class="skel-mask skel-mask-4"></div>
                                                    <div class="skel-mask skel-mask-5"></div>
                                                    <div class="skel-mask skel-mask-6"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-skeleton props">
                                            <div class="animated-background">
                                                <div class="card-skeleton-img"></div>
                                                <div class="skel-mask-container">
                                                    <div class="skel-mask skel-mask-1"></div>
                                                    <div class="skel-mask skel-mask-2"></div>
                                                    <div class="skel-mask skel-mask-3"></div>
                                                    <div class="skel-mask skel-mask-4"></div>
                                                    <div class="skel-mask skel-mask-5"></div>
                                                    <div class="skel-mask skel-mask-6"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <ng-container *ngIf="!showLoading">
                                        <ng-container *ngFor="let row of rows">
                                            <div class="col-lg-12">
                                                <div class="feat_property list style2 hvr-bxshd bdrrn mb10 mt20" (click)="goToProperty(row.id)">
                                                    <div class="thumb">
                                                        <ng-container *ngIf="row.media.length > 0">
                                                            <img class="img-whp prop-img"
                                                                [src]="row.media ? row.media[0].base_path+'/'+row.media[0].system_name : '../assets/images/defaultd.jpeg'"
                                                                alt="fp1.jpg">
                                                        </ng-container>

                                                        <ng-container *ngIf="row.media.length  ==  0">
                                                            <img class="img-whp  prop-img"
                                                                src="assets/images/defaultd.jpeg" alt="fp1.jpg">
                                                        </ng-container>

                                                        <div class="thmb_cntnt">
                                                            <ul class="icon mb0">
                                                                <li class="list-inline-item" *ngIf="!row.is_favorite">
                                                                    <a (click)="markFavorite(row)"
                                                                        href="javascript:void(0);"><span
                                                                            class="flaticon-heart"></span></a></li>

                                                                <li class="list-inline-item"
                                                                    *ngIf="row.is_favorite == 1"><a
                                                                        (click)="markUnFavorite(row)"
                                                                        href="javascript:void(0);"><span
                                                                            class="fa fa-heart"></span></a></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="details">
                                                        <div class="tc_content">
                                                            <div class="dtls_headr">
                                                                <ul class="tag">
                                                                    <li class="list-inline-item"><a
                                                                            href="javascript:void(0)">For
                                                                            {{row?.type_name}}</a></li>
                                                                </ul>
                                                                <a class="fp_price  w-p"
                                                                   href="javascript:void(0)">{{row?.price | currency: 'GHâ‚µ' : 'symbol' : '1.0-0'}}</a>
                                                            </div>
                                                            <p class="text-thm">Apartment</p>
                                                            <h4 routerLink="/pages/property/{{row.id}}">
                                                                {{row?.name}}</h4>
                                                            <p><span class="flaticon-placeholder"></span>
                                                                {{row?.address}}, {{row.city ? row.city+' ,' :''}}
                                                                {{row.country ? row.country :''}}</p>
                                                            <ul class="prop_details mb0">
                                                                <li class="list-inline-item"><a
                                                                        href="javascript:void(0)">Beds:
                                                                        {{row?.no_of_bed_room}}</a></li>
                                                                <li class="list-inline-item"><a
                                                                        href="javascript:void(0)">Baths:
                                                                        {{row?.no_of_bath_room}}</a></li>
                                                                <li class="list-inline-item"><a
                                                                        href="javascript:void(0)">Sq Ft:
                                                                        {{row?.property_area}}</a></li>
                                                            </ul>
                                                            <h5 class="mt-2">Description</h5>
                                                            <p>{{row?.description}} </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>


                                    <div class="col-lg-12 mt20">
                                        <div class="mbp_pagination">
                                            <pagination class="custom-pagination" [boundaryLinks]="false"
                                                [customPreviousTemplate]="prevTemplate"
                                                [customNextTemplate]="nextTemplate" [rotate]="rotate" [maxSize]="limit"
                                                (pageChanged)="pageChanged($event)" [totalItems]="total"
                                                [itemsPerPage]="limit" [ngModelOptions]="{standalone: true}"
                                                [(ngModel)]="activePage">
                                            </pagination>
                                            <ng-template #prevTemplate let-disabled="disabled"
                                                let-currentPage="currentPage">
                                                <ng-container *ngIf="!disabled">
                                                    <a href="javascript:void(0);" tabindex="-1" aria-disabled="true">
                                                        <span class="flaticon-left-arrow"></span></a>
                                                </ng-container>
                                                <ng-container *ngIf="disabled">
                                                    <a href="javascript:void(0);" tabindex="-1" aria-disabled="true">
                                                        <span class="flaticon-left-arrow"></span></a>
                                                </ng-container>
                                            </ng-template>

                                            <ng-template #nextTemplate let-disabled="disabled"
                                                let-currentPage="currentPage">
                                                <ng-container *ngIf="!disabled">
                                                    <a href="javascript:void(0);"><span
                                                            class="flaticon-right-arrow"></span></a>
                                                </ng-container>
                                                <ng-container *ngIf="disabled">
                                                    <a href="javascript:void(0);"><span
                                                            class="flaticon-right-arrow"></span></a>
                                                </ng-container>
                                            </ng-template>
                                        </div>
                                    </div>

                                </div>
                                <div class="tab-pane fade" id="review" role="tabpanel" aria-labelledby="review-tab">
                                    <div class="product_single_content">
                                        <div class="mbp_pagination_comments">

                                            <ng-container *ngIf="showLoadingReviews">
                                                <div class="card-skeleton props">
                                                    <div class="animated-background">
                                                        <div class="card-skeleton-img"></div>
                                                        <div class="skel-mask-container">
                                                            <div class="skel-mask skel-mask-1"></div>
                                                            <div class="skel-mask skel-mask-2"></div>
                                                            <div class="skel-mask skel-mask-3"></div>
                                                            <div class="skel-mask skel-mask-4"></div>
                                                            <div class="skel-mask skel-mask-5"></div>
                                                            <div class="skel-mask skel-mask-6"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="!showLoadingReviews">
                                                <ng-container *ngFor="let item of reviews">
                                                    <div class="mbp_first media">
                                                        <img height="80" width="80"
                                                            [src]="item.user &&  item.user?.profile_media ? item.user?.profile_media?.base_path+'/'+item.user?.profile_media?.system_name : '../assets/images/defaultd.jpeg'"
                                                            alt="{{item.user?.profile_media?.system_name}}"
                                                            class="mr-3 b-50">
                                                        <div class="media-body">
                                                            <h4 class="sub_title mt-0">{{item?.user?.first_name}}
                                                                {{item?.user?.last_name}}
                                                                <div class="sspd_review dif rate">
                                                                    <ngb-rating [rate]="item?.rating" [max]="5"
                                                                        [readonly]="true">
                                                                        <ng-template let-fill="fill">
                                                                            <span class="star"
                                                                                [class.full]="fill === 100">
                                                                                <span class="half"
                                                                                    [style.width.%]="fill">&#9733;</span>&#9733;
                                                                            </span>
                                                                        </ng-template>
                                                                    </ngb-rating>
                                                                </div>
                                                            </h4>
                                                            <a class="sspd_postdate fz14"
                                                                href="javascript:void(0);">{{item?.created_at| date:"MMMM d, y"}}
                                                            </a>
                                                            <p class="mt10">{{item?.comments}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="custom_hr"></div>
                                                </ng-container>
                                            </ng-container>



                                            <div class="custom_hr"></div>
                                            <div class="mbp_comment_form style2"
                                                *ngIf="requestService.isAuthenticated();">
                                                <h4>Write a Review</h4>
                                                <ul class="sspd_review">
                                                    <li class="list-inline-item">
                                                        <ngb-rating class="main-rating" [(rate)]="currentRate"
                                                            [max]="5">
                                                            <ng-template let-fill="fill">
                                                                <span class="star" [class.full]="fill === 100">
                                                                    <span class="half"
                                                                        [style.width.%]="fill">&#9733;</span>&#9733;
                                                                </span>
                                                            </ng-template>
                                                        </ngb-rating>
                                                    </li>
                                                    <li class="list-inline-item review_rating_para">Your Rating & Review
                                                    </li>
                                                </ul>
                                                <form class="comments_form">

                                                    <div class="form-group">
                                                        <textarea [(ngModel)]="comments"
                                                            [ngModelOptions]="{standalone: true}" class="form-control"
                                                            id="exampleFormControlTextarea1" rows="12"
                                                            placeholder="Your Review"></textarea>
                                                    </div>
                                                    <button type="submit" (click)="addReview()"
                                                        class="btn btn-thm">Submit Review <span
                                                            class="flaticon-right-arrow-1"></span></button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<app-chat-modal></app-chat-modal>